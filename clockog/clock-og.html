<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Sliding Clock</title>
    <style>
        /* CSS is now inside the HTML file */
        @charset "utf-8";

        /* latin-ext */
        @font-face {
          font-family: 'Overpass';
          font-style: normal;
          font-weight: 400;
          src: local('Overpass Regular'), local('Overpass-Regular'), url(https://fonts.gstatic.com/s/overpass/v2/qFdH35WCmI96Ajtm81GrU9vyww.woff2) format('woff2');
          unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
        }
        /* latin */
        @font-face {
          font-family: 'Overpass';
          font-style: normal;
          font-weight: 400;
          src: local('Overpass Regular'), local('Overpass-Regular'), url(https://fonts.gstatic.com/s/overpass/v2/qFdH35WCmI96Ajtm81GlU9s.woff2) format('woff2');
          unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }

        * {
            box-sizing: border-box;
            padding: 0;
            margin: 0;
        }

        html {
            place-items: center;
        }

        /* --- LIGHT THEME (DEFAULT) --- */
        body {
            font-family: monospace;
            font-size: 2rem;
            min-height: 100vh;
            display: grid;
            overflow-y: hidden;
            place-items: center;
            background: linear-gradient(-45deg, #c4d2ef, #dfe6f6);
            transition: background 500ms ease-in-out;
        }

        .hr,
        .min,
        .sec {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-gap: 3rem;
            grid-row: 1/2;
            align-items: start;
        }

        .number {
            padding: 0.5em;
            width: 4rem;
            height: 4rem;
            display: grid;
            place-items: center;
            color: #f9fbfd;
            transition: all 500ms 100ms ease;
            border-radius: 50%;
        }

        .number.pop {
            color: #3e6ccb;
            font-weight: bold;
            transform: scale(1.3);
            background-color: #dfe6f6;
            box-shadow: -10px -10px 20px -5px #f9fbfd, 10px 10px 20px #a9bee8;
        }

        .strip {
            transition: transform 500ms ease-in-out;
            border-radius: 8px;
            background-color: #dfe6f6;
            box-shadow: -10px -10px 20px -5px #f9fbfd, 10px 10px 20px #a9bee8;
        }

        .clock {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 5rem;
            height: 4rem;
            position: relative;
            padding: 0 4rem;
        }

        #changeButton{
            position: absolute;
            width: 40px;
            height: 40px;
            top: 40px;
            right: 40px;
            border-radius: 20px;
            background-color: rgb(44, 44, 44);
            cursor: pointer;
            transition: background-color 500ms ease-in-out;
        }

        .date {
            position: absolute;
            right: 40px;
            bottom: 35px;
            color: #4477ddcc;
            font-size: 40px;
            font-family: "Overpass", Roboto;
            transition: color 500ms ease-in-out;
          }

        .week {
            position: absolute;
            right: 40px;
            bottom: 78px;
            color: #3b78e9cc;
            font-size: 40px;
            font-family: "Overpass", Roboto;
            transition: color 500ms ease-in-out;
        }

        /* --- DARK THEME (APPLIES WHEN body.dark-theme IS ACTIVE) --- */
        body.dark-theme {
            background: linear-gradient(-45deg, #000000, #333333c2);
        }

        body.dark-theme .number {
            color: #8a8a8a;
        }

        body.dark-theme .number.pop {
            color: #f3f3f3;
            background-color: #1a1818c5;
            box-shadow: -10px -10px 20px -5px #525252ec, 10px 10px 20px #1d1d1d;
        }

        body.dark-theme .strip {
            background-color: #2b2b2b7e;
            box-shadow: -10px -5px 20px -5px rgba(104, 104, 104, 0), 10px 10px 20px #131010a8;
        }

        body.dark-theme #changeButton{
            background-color: #c4d2ef;
        }

        body.dark-theme .date,
        body.dark-theme .week {
            color: #e9e9e9;
        }
    </style>
</head>
<body>
    <div class="clock">
        <div class="hr">
            <div class="strip">
                <div class="number">0</div>
                <div class="number">1</div>
                <div class="number">2</div>
            </div>
            <div class="strip">
                <div class="number">0</div>
                <div class="number">1</div>
                <div class="number">2</div>
                <div class="number">3</div>
                <div class="number">4</div>
                <div class="number">5</div>
                <div class="number">6</div>
                <div class="number">7</div>
                <div class="number">8</div>
                <div class="number">9</div>
            </div>
        </div>
        <div class="min">
            <div class="strip">
                <div class="number">0</div>
                <div class="number">1</div>
                <div class="number">2</div>
                <div class="number">3</div>
                <div class="number">4</div>
                <div class="number">5</div>
            </div>
                <div class="strip">
                <div class="number">0</div>
                <div class="number">1</div>
                <div class="number">2</div>
                <div class="number">3</div>
                <div class="number">4</div>
                <div class="number">5</div>
                <div class="number">6</div>
                <div class="number">7</div>
                <div class="number">8</div>
                <div class="number">9</div>
            </div>
        </div>
        <div class="sec">
            <div class="strip">
                <div class="number">0</div>
                <div class="number">1</div>
                <div class="number">2</div>
                <div class="number">3</div>
                <div class="number">4</div>
                <div class="number">5</div>
            </div>
            <div class="strip">
                <div class="number">0</div>
                <div class="number">1</div>
                <div class="number">2</div>
                <div class="number">3</div>
                <div class="number">4</div>
                <div class="number">5</div>
                <div class="number">6</div>
                <div class="number">7</div>
                <div class="number">8</div>
                <div class="number">9</div>
            </div>
        </div>
    </div>
    <div id="changeButton" onclick="changeCSS()"></div>
    <div class="date"></div>
    <div class="week"></div>

    <script>
        // JavaScript is now inside the HTML file
        const strips = [...document.querySelectorAll(".strip")];
        const numberSize = "4"; // in rem

        var lastTime = new Array(-1, -1, -1);

        // highlight number i on strip s for 1 second
        function highlight(strip, d) {
            strips[strip]
                .querySelector(`.number:nth-of-type(${d + 1})`)
                .classList.add("pop");

            setTimeout(() => {
                strips[strip]
                    .querySelector(`.number:nth-of-type(${d + 1})`)
                    .classList.remove("pop");
            }, 950); // causes ticking
        }

        function stripSlider(strip, id, number) {
            let d1 = Math.floor(number / 10);
            let d2 = number % 10;

            if (lastTime[id] === -1 || lastTime[id] !== number) {
                strips[strip].style.transform = `translateY(${d1 * -numberSize}rem)`;
                strips[strip + 1].style.transform = `translateY(${d2 * -numberSize}rem)`;

                lastTime[id] = number;
            }

            highlight(strip, d1);
            highlight(strip + 1, d2);
        }

        function updateClock() {
            const time = new Date();
            const hours = time.getHours();
            const mins = time.getMinutes();
            const secs = time.getSeconds();

            stripSlider(0, 0, hours);
            stripSlider(2, 1, mins);
            stripSlider(4, 2, secs);
        }

        // --- THEME CHANGE FUNCTION ---
        function changeCSS() {
            document.body.classList.toggle('dark-theme');
        }

        // --- DATE AND WEEK LOGIC ---
        function setDate() {
            const now = new Date();
            const weekList = ["Sun", "Mon", "Tue", "Wed", "Thur", "Fri", "Sat"];
            const monthList = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

            const week = weekList[now.getDay()];
            const month = monthList[now.getMonth()];
            let day = now.getDate();
            const year = now.getFullYear();

            if (day < 10) {
              day = "0" + day;
            }

            const dateString = month + " " + day + ", " + year;
            document.querySelector(".date").innerHTML = dateString;
            document.querySelector(".week").innerHTML = week + '.';
        }

        // --- INITIALIZE EVERYTHING ---
        setDate();
        setInterval(updateClock, 1000);
        updateClock(); // Run once immediately on load
    </script>
</body>
</html>